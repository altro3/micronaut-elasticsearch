plugins {
    id "groovy"
}

dependencies {
    testImplementation project(":elasticsearch")
    testImplementation "io.micronaut.groovy:micronaut-runtime-groovy"
    testImplementation "io.micronaut:micronaut-validation"
    testImplementation "org.elasticsearch.client:elasticsearch-rest-high-level-client:$elasticsearchVersion"
    testCompileOnly "io.micronaut:micronaut-inject-groovy"
    // tag::testcontainers-dependencies[]
    testImplementation "org.testcontainers:spock:$testcontainersVersion"
    testImplementation "org.testcontainers:elasticsearch:$testcontainersVersion"
    // end::testcontainers-dependencies[]
    testRuntimeOnly "ch.qos.logback:logback-classic"
}

test {
    jvmArgs '-Duser.country=US'
    jvmArgs '-Duser.language=en'
    testLogging {
        showStandardStreams = true
        exceptionFormat = 'full'
    }
    failFast = true
}

tasks.withType(GroovyCompile) {
    groovyOptions.forkOptions.jvmArgs.add('-Dgroovy.parameters=true')
}